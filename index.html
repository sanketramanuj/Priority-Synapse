<!DOCTYPE html>
<html>
<head>
    <title>Real Look - Walk & Talk</title>
    <style>
        body { margin: 0; background: #111; color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        #controls { position: absolute; bottom: 30px; width: 100%; text-align: center; z-index: 10; }
        button { 
            padding: 15px 30px; font-size: 18px; cursor: pointer; border-radius: 50px; 
            border: none; background: #e91e63; color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            margin: 0 10px; transition: 0.3s;
        }
        button:hover { background: #c2185b; transform: scale(1.05); }
        #loader { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 20px; }
    </style>
</head>
<body>

    <div id="loader">Loading Realistic Avatar...</div>
    
    <div id="controls">
        <button onclick="talk()">Click to Talk</button>
        <button onclick="toggleMovement()">Start Walking</button>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';
        import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/loaders/GLTFLoader.js';

        let scene, camera, renderer, model, mixer, clock = new THREE.Clock();
        let moving = false;

        // 1. Scene Setup
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x111111);
        
        camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 1.6, 3);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.outputEncoding = THREE.sRGBEncoding;
        document.body.appendChild(renderer.domElement);

        // 2. Realistic Lighting
        scene.add(new THREE.AmbientLight(0xffffff, 0.8));
        const light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(5, 10, 5);
        scene.add(light);

        // 3. Load High-Quality Girl Model
        const loader = new GLTFLoader();
        // This is a realistic avatar URL
        loader.load('https://models.readyplayer.me/64b51a91e56999b8f158564a.glb', (gltf) => {
            model = gltf.scene;
            scene.add(model);
            document.getElementById('loader').style.display = 'none';
            
            mixer = new THREE.AnimationMixer(model);
            if (gltf.animations.length > 0) {
                const action = mixer.clipAction(gltf.animations[0]);
                action.play();
            }
        });

        // 4. Animation Loop
        function animate() {
            requestAnimationFrame(animate);
            let delta = clock.getDelta();
            if (mixer) mixer.update(delta);
            
            // Manual "Walk" sway if moving is toggled
            if (moving && model) {
                model.rotation.y += 0.01; // Make her turn
                model.position.z = Math.sin(Date.now() * 0.002) * 0.5; // Move back/forth
            }
            
            renderer.render(scene, camera);
        }
        animate();

        // --- FUNCTIONS ---
        window.talk = () => {
            const speech = new SpeechSynthesisUtterance("Hey! I am finally loaded. I can walk and talk now. What do you think?");
            speech.pitch = 1.1;
            window.speechSynthesis.speak(speech);
        };

        window.toggleMovement = () => {
            moving = !moving;
            const btn = event.target;
            btn.innerText = moving ? "Stop Walking" : "Start Walking";
        };
    </script>
</body>
</html>
